---
phase: 35-user-manual
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [MANUAL.md]
autonomous: true

must_haves:
  truths:
    - "MANUAL.md exists and is comprehensive"
    - "All 37 built-in functions documented with signature, description, and example"
    - "Getting-started section covers build, launch, basic usage"
    - "Workflow tutorials cover Rogers-Ramanujan, product identification, and relation finding"
    - "REPL features documented: tab completion, arrow keys, history, semicolon suppression, backslash continuation, timing, script mode"
  artifacts:
    - path: "MANUAL.md"
      provides: "Complete user-facing documentation"
---

<objective>
Create MANUAL.md — a comprehensive user manual for the q-series REPL.

Purpose: Users need a single reference document covering all built-in functions, REPL features, and mathematical workflows. Currently the only docs are build-focused (README.md) and developer-facing (SPEC.md).

Output: MANUAL.md at project root.
</objective>

<context>
@src/repl.h (lines 143-187 for getHelpTable — all 37 built-ins with signatures)
@qseriesdoc.md (Frank Garvan's tutorial — mathematical examples and workflows)
@SPEC.md (architecture, acceptance tests, function descriptions)
@README.md (current build docs)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write MANUAL.md</name>
  <files>MANUAL.md</files>
  <action>
Create MANUAL.md at project root with these sections:

**1. Overview** (3-5 sentences)
What the program does, who it's for, what makes it unique (zero-deps, exact arithmetic).

**2. Getting Started**
- Build: `make` (or `g++ -std=c++20 -O2 -o qseries src/main.cpp`)
- Launch: `./qseries` (interactive) or `./qseries < script.qs` (script mode)
- Basic usage: assign variables with `:=`, evaluate expressions, use `help` and `help(func)`
- Set truncation: `set_trunc(100)`
- Suppress output: end statement with `:` (like Maple's `;`)

**3. REPL Features**
- Tab completion (partial name → Tab)
- Arrow keys: left/right to edit line, up/down for history
- Backslash continuation for multi-line input
- Timing shown after each command (interactive mode)
- Script mode: `./qseries < file.qs`
- `version` command

**4. Built-in Functions Reference**
Organize into categories. For each function: signature, description, one example with expected output.

Categories:
- **Series Construction**: `aqprod`, `etaq`, `qbin`, `theta2`, `theta3`, `theta4`, `theta`, `tripleprod`, `quinprod`, `winquist`, `T`
- **Series Inspection**: `series`, `coeffs`, `qdegree`, `lqdegree`, `subs_q`, `sift`
- **Product Conversion**: `prodmake`, `mprodmake`, `etamake`, `jacprodmake`, `jac2prod`, `jac2series`, `qfactor`, `checkprod`, `checkmult`
- **Relation Finding**: `findhom`, `findnonhom`, `findhomcombo`, `findnonhomcombo`, `findpoly`, `findlincombo`, `findmaxind`
- **Summation**: `sum`, `add`
- **Number Theory**: `sigma`, `legendre`
- **Utilities**: `set_trunc`, `clear_cache`, `help`, `version`

Examples should be realistic q-series computations, not toy examples. Draw from qseriesdoc.md worked examples where possible.

**5. Workflow Tutorials**
Three worked examples showing multi-step mathematical workflows:

Tutorial 1: **Rogers-Ramanujan Identity**
```
set_trunc(50):
rr := sum(q^(n^2)/aqprod(q,q,n,50), n, 0, 8):
series(rr, 30)
prodmake(rr, 50)
jacprodmake(rr, 50)
```

Tutorial 2: **Product Identification**
```
set_trunc(100):
f := theta3(100)
etamake(f, 100)
g := etaq(2,100)/etaq(1,100)
qfactor(g, 100)
```

Tutorial 3: **Finding Relations (Gauss AGM)**
```
set_trunc(100):
a := theta2(100)^2:
b := theta3(100)^2:
c := theta4(100)^2:
d := theta3(100)*theta4(100):
findhom([a,b,c,d], 2, 0)
```

**6. Mathematical Background** (brief)
One paragraph explaining q-series, partition functions, eta/theta functions for newcomers. Link to qseriesdoc.md for the full Garvan tutorial.
  </action>
  <verify>
MANUAL.md exists at project root. Verify:
1. All 37 built-in function names from getHelpTable() appear in the document
2. Each function has signature, description, and at least one example
3. Getting-started section is complete
4. Three workflow tutorials are included
5. REPL features (tab, arrows, history, semicolon, backslash, timing, script mode) documented
  </verify>
  <done>MANUAL.md exists with all sections; all 37 built-ins documented with examples; 3 workflow tutorials included</done>
</task>

</tasks>

<verification>
1. MANUAL.md exists at project root
2. All 37 built-in functions documented with signature + example
3. Getting-started covers build, launch, basic usage
4. Three workflow tutorials (Rogers-Ramanujan, product ID, relations)
5. REPL features section covers all interactive features
</verification>

<success_criteria>
- MANUAL.md is comprehensive, well-organized, and readable
- A mathematician unfamiliar with the tool could use it as sole reference
- All 37 functions from getHelpTable() are documented
- Examples are real q-series computations (not toy examples)
</success_criteria>

<output>
After completion, create `.planning/phases/35-user-manual/35-01-SUMMARY.md`
</output>
