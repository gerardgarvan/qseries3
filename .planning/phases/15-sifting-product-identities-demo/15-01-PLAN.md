---
phase: 15-sifting-product-identities-demo
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - demo/garvan-demo.sh
autonomous: true

must_haves:
  truths:
    - "sift + etamake produces Rødseth eta-product identity in demo"
    - "triple product shows Euler pentagonal expansion in demo"
    - "quintuple product and Euler dissection (jacprodmake/jac2prod) run in demo"
    - "Winquist identity expansion is shown in demo"
  artifacts:
    - path: demo/garvan-demo.sh
      provides: Sifting and product identities run blocks (§5, §6.1, §6.2, §6.3)
      contains: "sift(PD", "tripleprod(q,q^3", "quinprod(q,q^5", "winquist(q^5,q^3,q^11"
  key_links:
    - from: demo/garvan-demo.sh
      to: qseries binary
      via: run() pipe
      pattern: "run.*sift|run.*tripleprod|run.*quinprod|run.*winquist"
---

<objective>
Add four run blocks to the Sifting and product identities section in garvan-demo.sh, replacing the Phase 15 placeholder. Reproduce qseriesdoc §5 (sift+etamake Rødseth), §6.1 (triple product Euler pentagonal), §6.2 (quintuple + Euler dissection), §6.3 (Winquist).

Purpose: DEMO-05 — sifting and product identity examples match qseriesdoc
Output: demo/garvan-demo.sh with four run blocks; `cd dist && bash demo/garvan-demo.sh` runs all blocks successfully
</objective>

<execution_context>
@C:/Users/ggarv/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ggarv/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-sifting-product-identities-demo/15-RESEARCH.md
@demo/garvan-demo.sh
</context>

<tasks>

<task type="auto">
  <name>Add four run blocks for sifting and product identities</name>
  <files>demo/garvan-demo.sh</files>
  <action>
Add four run blocks after the header line "# === Sifting and product identities (qseriesdoc §5, §6) ===". Use exact commands from 15-RESEARCH.md (Option A, lines 120-142). Each run() is a separate process — define all variables within the same run() where they are used. Use q^n syntax (q^3, q^5, q^11) for product function arguments, NOT subs_q.

1) **§5 Sifting (Rødseth):**
   echo "" and echo "--- Sifting: Rødseth (qseriesdoc §5) ---"
   run "set_trunc(200)" "PD := etaq(2,200)/etaq(1,200)" "PD1 := sift(PD,5,1,199)" "etamake(PD1, 30)"
   CRITICAL: Use etamake(PD1, 30) — NOT 38 — to avoid coefficient overflow (Test 6 / acceptance.sh).

2) **§6.1 Triple product (Euler pentagonal):**
   echo "" and echo "--- Triple product: Euler pentagonal (qseriesdoc §6.1) ---"
   run "set_trunc(60)" "series(tripleprod(q,q^3,10), 60)"

3) **§6.2 Quintuple + Euler dissection:**
   echo "" and echo "--- Quintuple product and Euler dissection (qseriesdoc §6.2) ---"
   run "set_trunc(500)" "series(quinprod(q,q^5,20), 100)" "EULER := etaq(1,500)" "E0 := sift(EULER,5,0,499)" "jp := jacprodmake(E0,50)" "jac2prod(jp)"
   Note: jac2prod(jp) expects variable name; jp is assigned in same run.

4) **§6.3 Winquist identity:**
   echo "" and echo "--- Winquist identity (qseriesdoc §6.3) ---"
   run "set_trunc(200)" "series(winquist(q^5,q^3,q^11,20), 60)"

Preserve the run() pattern used in Phases 13–14. Section header remains: # === Sifting and product identities (qseriesdoc §5, §6) ===
  </action>
  <verify>
cd dist && bash demo/garvan-demo.sh 2>&1 | grep -E "Sifting:|Triple product:|Quintuple product|Winquist identity:"
cd dist && bash demo/garvan-demo.sh 2>&1 | grep -E "η|JAC|tripleprod|quinprod|winquist" | head -15
  </verify>
  <done>
Demo runs all four blocks; §5 shows etamake output with η notation (Rødseth); §6.1 shows Euler pentagonal series; §6.2 shows quinprod, jacprodmake, and jac2prod output; §6.3 shows Winquist expansion.
  </done>
</task>

</tasks>

<verification>
- Run `cd dist && bash demo/garvan-demo.sh` — Sifting and product identities section output visible
- §5 etamake(PD1, 30) output contains η (eta product form)
- §6.1 tripleprod output shows pentagonal exponents
- §6.2 quinprod, jacprodmake, jac2prod produce expected outputs (JAC notation for jac2prod)
- §6.3 winquist output shows series expansion
</verification>

<success_criteria>
1. sift example runs and extracts coefficients; etamake identifies Rødseth identity
2. triple product (Euler pentagonal) demonstrated
3. quintuple product and Euler dissection (sift + jacprodmake) demonstrated
4. Winquist identity demonstrated
</success_criteria>

<output>
After completion, create `.planning/phases/15-sifting-product-identities-demo/15-01-SUMMARY.md`
</output>
