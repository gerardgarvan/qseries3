---
phase: 34-fix-compiler-warnings
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/qfuncs.h, src/convert.h, src/repl.h]
autonomous: true

must_haves:
  truths:
    - "g++ -std=c++20 -O2 -Wall -Wextra -Wpedantic produces zero warnings"
    - "All existing acceptance tests pass (no regressions)"
    - "No behavioral changes — warning fixes only"
  artifacts:
    - path: "src/qfuncs.h"
      provides: "Warning-free theta functions"
    - path: "src/convert.h"
      provides: "Warning-free etamake"
    - path: "src/repl.h"
      provides: "Warning-free evalToInt, evalExpr, dispatchBuiltin, banner"
---

<objective>
Fix all 8 compiler warnings under -Wall -Wextra -Wpedantic across 3 source files.

Purpose: Clean build with zero warnings improves code quality and catches real bugs.
No behavioral changes — warning fixes only.

Output: All 3 source files modified; zero-warning build; all tests passing.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Fix all 8 warnings across src/qfuncs.h, src/convert.h, src/repl.h</name>
  <files>src/qfuncs.h, src/convert.h, src/repl.h</files>
  <action>
Fix each warning individually:

**Warning 1-3: Unused parameter `q` in theta2, theta3, theta4 (src/qfuncs.h lines 166, 176, 186)**
These functions take `const Series& q` but compute directly from integer formulas.
Fix: Cast to void: add `(void)q;` as first line of each function body.

**Warning 4: Unused variable `q_shift` in etamake (src/convert.h line 35)**
`int q_shift = me;` is assigned but never read.
Fix: Remove the line entirely.

**Warning 5-6: Implicit fallthrough in evalToInt and evalExpr (src/repl.h lines 224, 668)**
`case Expr::Tag::BinOp` block falls through to `case Expr::Tag::UnOp` without break/return.
Fix: Add `[[fallthrough]];` attribute after the closing brace of the BinOp case in both functions. Actually, looking at the code more carefully — in evalToInt, the BinOp case returns in all paths (line 221 `return acc;`), but the compiler sees the outer `}` of the BinOp case block and warns. The issue is that the switch case for BinOp ends with a `}` that doesn't have a break/return at the outer scope. Add `break;` after the closing `}` of the BinOp case block in both evalToInt (after line 224) and evalExpr (after line 668).

**Warning 7: Maybe-uninitialized `check` in findpoly dispatch (src/repl.h line 575-576)**
`std::optional<int> check = (args.size() == 5) ? std::optional<int>(...) : std::nullopt;`
GCC false positive on optional internals. Fix: Initialize explicitly and assign in a separate statement:
```cpp
std::optional<int> check;
if (args.size() == 5) check = static_cast<int>(evi(4));
```

**Warning 8: Backslash-space-newline in ASCII banner (src/repl.h line 1045)**
The line `| |/ / _` | '_ \ / _` |/ _` | '__/ _ \ / _ \` has a trailing space after the final backslash.
Fix: Remove the trailing space after the final `\` on that line (trim to end exactly at the backslash character, or replace the trailing `\ ` with `\`).
  </action>
  <verify>
Build: `g++ -std=c++20 -O2 -Wall -Wextra -Wpedantic -o qseries src/main.cpp` must succeed with ZERO warnings.
Run: all acceptance tests must pass.
  </verify>
  <done>Zero-warning build; all acceptance tests pass; no behavioral changes</done>
</task>

</tasks>

<verification>
1. `g++ -std=c++20 -O2 -Wall -Wextra -Wpedantic` produces zero warnings
2. All acceptance tests pass (core + supplemental)
3. No behavioral changes — only warning fixes
</verification>

<success_criteria>
- Build is completely clean under -Wall -Wextra -Wpedantic
- All existing acceptance tests pass with zero regressions
- Code changes are minimal and purely cosmetic (no logic changes)
</success_criteria>

<output>
After completion, create `.planning/phases/34-fix-compiler-warnings/34-01-SUMMARY.md`
</output>
