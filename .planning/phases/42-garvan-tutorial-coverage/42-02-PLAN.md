---
phase: 42-garvan-tutorial-coverage
plan: 02
type: execute
wave: 2
depends_on: ["42-01"]
files_modified:
  - src/repl.h
  - src/main.cpp
  - tests/acceptance-wins.sh
  - MANUAL.md
autonomous: true

must_haves:
  truths:
    - "version() outputs 'qseries 2.0'"
    - "'qseries --version' outputs 'qseries 2.0'"
    - "Banner shows 'version 2.0'"
    - "MANUAL.md documents min and max with examples"
    - "MANUAL.md version references show 2.0"
    - "acceptance-wins.sh passes with updated version strings"
    - "All existing acceptance tests still pass"
  artifacts:
    - path: "src/repl.h"
      provides: "Updated version strings (version() and banner)"
      contains: "qseries 2.0"
    - path: "src/main.cpp"
      provides: "Updated --version flag output"
      contains: "qseries 2.0"
    - path: "tests/acceptance-wins.sh"
      provides: "Updated version test expectations"
      contains: "qseries 2.0"
    - path: "MANUAL.md"
      provides: "min/max documentation and updated version references"
      contains: "min(a, b, ...)"
  key_links:
    - from: "tests/acceptance-wins.sh"
      to: "src/repl.h"
      via: "version string match"
      pattern: "qseries 2\\.0"
    - from: "MANUAL.md"
      to: "src/repl.h"
      via: "documented version matches actual"
      pattern: "qseries 2\\.0"
---

<objective>
Bump version to 2.0 across all files, update MANUAL.md with min/max documentation and T_rn performance note, and update acceptance tests.

Purpose: Completes Milestone v2.0 by updating all version strings (7 locations across 4 files), documenting new features, and ensuring acceptance tests match.
Output: Updated version strings, MANUAL.md with min/max entries, passing acceptance tests.
</objective>

<execution_context>
@.planning/phases/42-garvan-tutorial-coverage/42-CONTEXT.md
@.planning/phases/42-garvan-tutorial-coverage/42-RESEARCH.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/42-garvan-tutorial-coverage/42-01-SUMMARY.md
@src/repl.h
@src/main.cpp
@tests/acceptance-wins.sh
@MANUAL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Version bump 1.9 → 2.0 across all source, test, and doc files</name>
  <files>src/repl.h, src/main.cpp, tests/acceptance-wins.sh, MANUAL.md</files>
  <action>
  Replace "1.9" with "2.0" in ALL of these locations (7 total):

  1. `src/main.cpp` line 697: `std::cout << "qseries 1.9\n";` → `std::cout << "qseries 2.0\n";`
  2. `src/repl.h` line 517: `std::cout << "qseries 1.9\n";` → `std::cout << "qseries 2.0\n";`
  3. `src/repl.h` line 1187: `version 1.9` → `version 2.0` (in banner raw string)
  4. `tests/acceptance-wins.sh` line 20: `grep -q "qseries 1.9"` → `grep -q "qseries 2.0"`
  5. `tests/acceptance-wins.sh` line 29: `grep -q "qseries 1.9"` → `grep -q "qseries 2.0"`
  6. `MANUAL.md` line 142: `qseries 1.9` → `qseries 2.0`
  7. `MANUAL.md` line 599: `qseries 1.9` → `qseries 2.0`

  After editing, verify with grep: `grep -rn "1\.9" src/ tests/acceptance-wins.sh MANUAL.md` should return zero matches in those files.
  </action>
  <verify>
  Build: `g++ -std=c++20 -O2 -o qseries main.cpp` — compiles.
  Test: `./qseries --version` outputs `qseries 2.0`.
  Test: `echo 'version()' | ./qseries` outputs `qseries 2.0`.
  Test: `bash tests/acceptance-wins.sh` — all tests pass.
  Test: `grep -rn "1\.9" src/ tests/acceptance-wins.sh MANUAL.md` — no matches.
  </verify>
  <done>All 7 version string locations updated to 2.0. No remaining "1.9" references in source, tests, or manual.</done>
</task>

<task type="auto">
  <name>Task 2: Update MANUAL.md with min/max documentation and T_rn performance note</name>
  <files>MANUAL.md</files>
  <action>
  1. Add a new "### Integer Utilities" subsection immediately after the "Number Theory Helpers" section (after the last entry in that section, before "### REPL Utilities" or the next section). Add entries for min and max:

     ```markdown
     ### Integer Utilities

     #### `min(a, b, ...)` — Minimum

     Returns the minimum of two or more integer arguments.

     ```
     qseries> min(3, 1, 4, 1, 5)
     1
     ```

     #### `max(a, b, ...)` — Maximum

     Returns the maximum of two or more integer arguments.

     ```
     qseries> max(3, 1, 4, 1, 5)
     5
     ```
     ```

  2. In the existing `T(r, n)` or `T(r, n, T)` help section (if one exists in MANUAL.md), add a brief note that T_rn uses memoization for performance: "Uses memoization internally; large values like T(0, 30, 50) compute efficiently."

     If no T section exists in MANUAL.md, add one in the "Series Construction" or "Product Conversion" section:
     ```markdown
     #### `T(r, n)` or `T(r, n, T)` — Finite q-product

     Computes the finite q-product T_{r,n} from the qseriesdoc recurrence. Uses memoization internally for efficient computation of large parameters.

     ```
     qseries> series(T(0, 8, 50), 20)
     ```
     ```

  3. Keep the existing manual style: signature heading, one-line description, code block with example.
  </action>
  <verify>
  Verify MANUAL.md contains "min(a, b, ...)" and "max(a, b, ...)" sections.
  Verify no duplicate sections were created.
  Verify consistent formatting with existing entries.
  </verify>
  <done>MANUAL.md contains Integer Utilities section with min/max entries and T_rn performance note. Style matches existing manual entries.</done>
</task>

</tasks>

<verification>
1. Build succeeds: `g++ -std=c++20 -O2 -o qseries main.cpp`
2. `./qseries --version` → `qseries 2.0`
3. `echo 'version()' | ./qseries` → contains `qseries 2.0`
4. `bash tests/acceptance-wins.sh` — all pass
5. `bash tests/acceptance.sh` — all pass (existing tests unbroken)
6. `grep -rn "1\.9" src/ tests/acceptance-wins.sh MANUAL.md` — zero matches
7. MANUAL.md has min/max entries with examples
</verification>

<success_criteria>
- Version 2.0 appears in all 7 locations
- MANUAL.md documents min, max, and T_rn performance
- All acceptance tests pass with updated version strings
</success_criteria>

<output>
After completion, create `.planning/phases/42-garvan-tutorial-coverage/42-02-SUMMARY.md`
</output>
